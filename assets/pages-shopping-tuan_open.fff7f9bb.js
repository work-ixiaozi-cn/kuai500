import{d as a,ah as t,r as e,aa as l,o as s,c as u,w as o,a as d,b as n,t as f,O as r,y as p,i,h as c,U as _,g as x,e as m,f as v,P as g,ai as b,x as y}from"./index.cf819d24.js";import{_ as w}from"./page.vue_vue_type_script_setup_true_lang.e73b259d.js";import{_ as h}from"./nav_bar.vue_vue_type_script_setup_true_lang.c285c6a0.js";import{_ as j}from"./pay.vue_vue_type_script_setup_true_lang.2aa5733c.js";import{_ as k}from"./uni-card.36ed251a.js";import{_ as C}from"./logo.79283f64.js";import{g as O,c as S}from"./router.6937c411.js";import{d as D}from"./tools.1a322396.js";import{_ as F}from"./tuan_join_desc.vue_vue_type_script_setup_true_lang.a55d18fe.js";import{a as A}from"./index.821f9091.js";import"./uni-nav-bar.6de95021.js";import"./uni-icons.ba5e75da.js";import"./gift.30625a0a.js";const I=a({__name:"tuan_pay_card",emits:["click"],setup(a,{emit:g}){const b=t(),y=e({days:0,hours:0,minutes:0,seconds:0}),w=()=>{p({title:"https://wwww.baidu.com/pages/shopping/tuan_join?code="+b.share_code})};return setInterval((()=>{var a,t,e,l,s;b.found&&0===(null==(a=b.found)?void 0:a.status)&&(y.value=D(Date.now(),1e3*(null==(t=b.found)?void 0:t.found_end_time))),b.follow&&0===(null==(e=b.follow)?void 0:e.status)&&(console.log(b.follow&&0===(null==(l=b.follow)?void 0:l.status)),y.value=D(Date.now(),1e3*(null==(s=b.follow)?void 0:s.found.found_end_time)))}),1e3),(a,t)=>{const e=i,p=c,g=_,h=x,j=m(v("uni-card"),k);return l(b).follow&&l(b).found?r("",!0):(s(),u(e,{key:0},{default:o((()=>[d(j,{class:"!rounded-15px",border:!1,padding:"0",margin:"0",spacing:"0",title:!l(b).found||l(b).found.found_uid?"我要开团":"我要拼团","is-shadow":!1},{default:o((()=>[d(e,{class:"text-center"},{default:o((()=>[d(e,{class:"text-24px font-semibold"},{default:o((()=>[n(f(l(b).name),1)])),_:1}),d(e,{class:"text-20px my-20px"},{default:o((()=>{var a,t,i,c,_,x,m,v;return[2===(null==(a=l(b).follow)?void 0:a.status)||2===(null==(t=l(b).found)?void 0:t.status)?(s(),u(e,{key:0},{default:o((()=>[d(p,{class:"rounded-full bg-ffd400 px-10px py-8px text-12px"},{default:o((()=>[n("拼团成功")])),_:1})])),_:1})):r("",!0),3===(null==(i=l(b).follow)?void 0:i.status)||3===(null==(c=l(b).found)?void 0:c.status)?(s(),u(e,{key:1},{default:o((()=>[d(p,{class:"rounded-full bg-gray-300 px-10px py-8px text-12px"},{default:o((()=>[n("拼团失败，获取50%时长")])),_:1})])),_:1})):r("",!0),0===(null==(_=l(b).found)?void 0:_.status)||0===(null==(x=l(b).found)?void 0:x.status)||1===(null==(m=l(b).found)?void 0:m.status)||1===(null==(v=l(b).found)?void 0:v.status)?(s(),u(e,{key:2},{default:o((()=>[d(p,{class:"mx-5px"},{default:o((()=>[n("剩余")])),_:1}),d(p,{class:"mx-5px bg-red-300 font-bold p-5px"},{default:o((()=>[n(f(24*y.value.days+y.value.hours),1)])),_:1}),d(p,{class:"mx-5px font-bold"},{default:o((()=>[n(":")])),_:1}),d(p,{class:"mx-5px bg-red-300 font-bold p-5px"},{default:o((()=>[n(f(y.value.minutes.toString().padStart(2,"0")),1)])),_:1}),d(p,{class:"mx-5px font-bold"},{default:o((()=>[n(":")])),_:1}),d(p,{class:"mx-5px bg-red-300 font-bold p-5px"},{default:o((()=>[n(f(y.value.seconds.toString().padStart(2,"0")),1)])),_:1}),d(p,{class:"mx-5px"},{default:o((()=>[n("结束")])),_:1})])),_:1})):r("",!0)]})),_:1}),d(e,{class:"overflow-x-auto"},{default:o((()=>[d(e,{class:"text-center flex justify-center"},{default:o((()=>[d(e,{class:"m-5px"},{default:o((()=>[d(e,{class:"rounded-full border-1px w-80px h-80px flex flex-center"},{default:o((()=>[d(g,{class:"self-center w-full h-full rounded-full",src:C,fit:"cover",mode:"widthFix"})])),_:1}),l(b).found?(s(),u(e,{key:0},{default:o((()=>[n("我是团长")])),_:1})):(s(),u(e,{key:1},{default:o((()=>[n("团长")])),_:1}))])),_:1}),d(e,{class:"float-left m-5px"},{default:o((()=>[d(e,{class:"rounded-full border-1px w-80px h-80px flex flex-center"},{default:o((()=>[d(e,{class:"self-center text-center flex-auto text-40px"},{default:o((()=>[n("?")])),_:1})])),_:1}),d(e,null,{default:o((()=>[n("A")])),_:1})])),_:1})])),_:1})])),_:1}),d(e,{class:"my-10px"},{default:o((()=>{var a,e,d;return[0===(null==(a=l(b).found)?void 0:a.status)?(s(),u(h,{key:0,class:"inline bg-03a976 rounded-full px-15px py-10px text-fff",onClick:w},{default:o((()=>[n("邀请好友拼团")])),_:1})):r("",!0),[2,3].indexOf(null==(e=l(b).found)?void 0:e.status)>-1||[2,3].indexOf(null==(d=l(b).follow)?void 0:d.status)>-1?(s(),u(h,{key:1,class:"inline bg-03a976 rounded-full px-15px py-10px text-fff",onClick:t[0]||(t[0]=a=>l(O)("/pages/ucenter/order"))},{default:o((()=>[n("查看订单")])),_:1})):r("",!0)]})),_:1})])),_:1})])),_:1},8,["title"])])),_:1}))}}}),P=a({__name:"tuan_open",setup(a){const t=e();A.pintuanFind({pintuan_id:S().options.pintuan_id}).then((a=>{if(0!==a.data.code)return p({title:a.data.data,showCancel:!1,success:()=>{O("/pages/shopping/index")}});t.value=a.data.data}));const l=()=>{var a;A.pintuanOpen({pintuan_id:null==(a=t.value)?void 0:a.id}).then((a=>{if(0!==a.data.code)return y({title:a.data.data,icon:"error"});t.value.found=a.data.data}))};return(a,e)=>{const n=i;return s(),u(w,{class:"tuan"},{navbar:o((()=>[d(n,{class:g(["bg-03a976",t.value?"rounded-b-20px -mb-50px pb-50px":""])},{default:o((()=>[d(h,{title:"拼团活动",backgroundColor:"#03a976",fixed:""})])),_:1},8,["class"])])),bottom:o((()=>{var a,e;return[t.value?(s(),u(j,{key:0,class:"pb-15px",money:null==(e=null==(a=t.value)?void 0:a.goods)?void 0:e.pintuan_price,onClick:l},null,8,["money"])):r("",!0)]})),default:o((()=>[t.value?(s(),u(n,{key:0,class:"mx-15px"},{default:o((()=>[d(I,b({class:""},t.value,{status:"open"}),null,16),d(F,{class:""})])),_:1})):r("",!0)])),_:1})}}});export{P as default};
