import{d as e,r as t,ao as l,o as i,c as a,w as s,a as n,ag as o,e as c,f as u,_ as r,a8 as d,P as h,T as p,O as m,b as g,t as f,V as _,U as v,h as b,i as y,af as w,F as C,N as k,Q as O,R as S,aa as V,ak as x,al as $}from"./index.cf819d24.js";import{a as A,b as B}from"./uni-list.721998e1.js";import{_ as I}from"./page.vue_vue_type_script_setup_true_lang.e73b259d.js";import{_ as E}from"./nav_bar.vue_vue_type_script_setup_true_lang.c285c6a0.js";import{_ as j}from"./uni-icons.ba5e75da.js";import"./uni-nav-bar.6de95021.js";const H=e({__name:"debugging_vconsole",setup(e){const r=t(l().vConsole),d=e=>{r.value=e.detail.value,l().setVConsole(e.detail.value)};return(e,t)=>{const l=o,h=c(u("uni-list-item"),A);return i(),a(h,{title:"vConsole",to:"./chat",onClick:e.onClick},{footer:s((()=>[n(l,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),onChange:d},null,8,["modelValue"])])),_:1},8,["to","onClick"])}}});const z=r({name:"uniCollapseItem",props:{title:{type:String,default:""},name:{type:[Number,String],default:""},disabled:{type:Boolean,default:!1},showAnimation:{type:Boolean,default:!0},open:{type:Boolean,default:!1},thumb:{type:String,default:""},titleBorder:{type:String,default:"auto"},border:{type:Boolean,default:!0},showArrow:{type:Boolean,default:!0}},data:()=>({isOpen:!1,isheight:null,height:0,elId:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,nameSync:0}),watch:{open(e){this.isOpen=e,this.onClick(e,"init")}},updated(e){this.$nextTick((()=>{this.init(!0)}))},created(){this.collapse=this.getCollapse(),this.oldHeight=0,this.onClick(this.open,"init")},unmounted(){this.__isUnmounted=!0,this.uninstall()},mounted(){this.collapse&&(""!==this.name?this.nameSync=this.name:this.nameSync=this.collapse.childrens.length+"",-1===this.collapse.names.indexOf(this.nameSync)?this.collapse.names.push(this.nameSync):console.warn(`name 值 ${this.nameSync} 重复`),-1===this.collapse.childrens.indexOf(this)&&this.collapse.childrens.push(this),this.init())},methods:{init(e){this.getCollapseHeight(e)},uninstall(){this.collapse&&(this.collapse.childrens.forEach(((e,t)=>{e===this&&this.collapse.childrens.splice(t,1)})),this.collapse.names.forEach(((e,t)=>{e===this.nameSync&&this.collapse.names.splice(t,1)})))},onClick(e,t){this.disabled||(this.isOpen=e,this.isOpen&&this.collapse&&this.collapse.setAccordion(this),"init"!==t&&this.collapse.onChange(e,this))},getCollapseHeight(e,t=0){d().in(this).select(`#${this.elId}`).fields({size:!0},(l=>{if(!(t>=10)){if(!l)return t++,void this.getCollapseHeight(!1,t);this.height=l.height,this.isheight=!0,e||this.onClick(this.isOpen,"init")}})).exec()},getNvueHwight(e){dom.getComponentRect(this.$refs["collapse--hook"],(t=>{if(t&&t.result&&t.size){if(this.height=t.size.height,this.isheight=!0,e)return;this.onClick(this.open,"init")}}))},getCollapse(e="uniCollapse"){let t=this.$parent,l=t.$options.name;for(;l!==e;){if(t=t.$parent,!t)return!1;l=t.$options.name}return t}}},[["render",function(e,t,l,o,r,d){const w=v,C=b,k=y,O=c(u("uni-icons"),j);return i(),a(k,{class:"uni-collapse-item"},{default:s((()=>[n(k,{onClick:t[0]||(t[0]=e=>d.onClick(!r.isOpen)),class:h(["uni-collapse-item__title",{"is-open":r.isOpen&&"auto"===l.titleBorder,"uni-collapse-item-border":"none"!==l.titleBorder}])},{default:s((()=>[n(k,{class:"uni-collapse-item__title-wrap"},{default:s((()=>[p(e.$slots,"title",{},(()=>[n(k,{class:h(["uni-collapse-item__title-box",{"is-disabled":l.disabled}])},{default:s((()=>[l.thumb?(i(),a(w,{key:0,src:l.thumb,class:"uni-collapse-item__title-img"},null,8,["src"])):m("",!0),n(C,{class:"uni-collapse-item__title-text"},{default:s((()=>[g(f(l.title),1)])),_:1})])),_:1},8,["class"])]),!0)])),_:3}),l.showArrow?(i(),a(k,{key:0,class:h([{"uni-collapse-item__title-arrow-active":r.isOpen,"uni-collapse-item--animation":!0===l.showAnimation},"uni-collapse-item__title-arrow"])},{default:s((()=>[n(O,{color:l.disabled?"#ddd":"#bbb",size:"14",type:"bottom"},null,8,["color"])])),_:1},8,["class"])):m("",!0)])),_:3},8,["class"]),n(k,{class:h(["uni-collapse-item__wrap",{"is--transition":l.showAnimation}]),style:_({height:(r.isOpen?r.height:0)+"px"})},{default:s((()=>[n(k,{id:r.elId,ref:"collapse--hook",class:h(["uni-collapse-item__wrap-content",{open:r.isheight,"uni-collapse-item--border":l.border&&r.isOpen}])},{default:s((()=>[p(e.$slots,"default",{},void 0,!0)])),_:3},8,["id","class"])])),_:3},8,["class","style"])])),_:3})}],["__scopeId","data-v-eed3cc78"]]);const D=r({name:"uniCollapse",emits:["change","activeItem","input","update:modelValue"],props:{value:{type:[String,Array],default:""},modelValue:{type:[String,Array],default:""},accordion:{type:[Boolean,String],default:!1}},data:()=>({}),computed:{dataValue(){let e="string"==typeof this.value&&""===this.value||Array.isArray(this.value)&&0===this.value.length;"string"==typeof this.modelValue&&""===this.modelValue||Array.isArray(this.modelValue)&&this.modelValue.length;return e?this.modelValue:this.value}},watch:{dataValue(e){this.setOpen(e)}},created(){this.childrens=[],this.names=[]},mounted(){this.$nextTick((()=>{this.setOpen(this.dataValue)}))},methods:{setOpen(e){let t="string"==typeof e,l=Array.isArray(e);this.childrens.forEach(((i,a)=>{if(t&&e===i.nameSync){if(!this.accordion)return void console.warn("accordion 属性为 false ,v-model 类型应该为 array");i.isOpen=!0}l&&e.forEach((e=>{if(e===i.nameSync){if(this.accordion)return void console.warn("accordion 属性为 true ,v-model 类型应该为 string");i.isOpen=!0}}))})),this.emit(e)},setAccordion(e){this.accordion&&this.childrens.forEach(((t,l)=>{e!==t&&(t.isOpen=!1)}))},resize(){this.childrens.forEach(((e,t)=>{e.getCollapseHeight()}))},onChange(e,t){let l=[];this.accordion?l=e?t.nameSync:"":this.childrens.forEach(((e,t)=>{e.isOpen&&l.push(e.nameSync)})),this.$emit("change",l),this.emit(l)},emit(e){this.$emit("input",e),this.$emit("update:modelValue",e)}}},[["render",function(e,t,l,n,o,c){const u=y;return i(),a(u,{class:"uni-collapse"},{default:s((()=>[p(e.$slots,"default",{},void 0,!0)])),_:3})}],["__scopeId","data-v-65472c35"]]),U=e({__name:"debugging_debugger",setup(e){const r=t(l().debug);w(r,((e,t)=>l().setDebug(t)));const d=t(),h=t(C());let p=t({});p.value.app_sid="xxx",(async e=>{const t=new Image,l=(new Date).valueOf(),i=new Promise(((e,i)=>{t.onload=()=>e((new Date).valueOf()-l),t.onerror=()=>i("error")}));t.src=`https://${e}/favicon.ico?${l}`})("www.google.com");const g=t({current:"",list:[{label:"开发环境",domain:"http://www.baidu.com"},{label:"测试环境",domain:"http://www.google.com"},{label:"灰度环境",domain:"http://www.example.com"},{label:"线上环境",domain:"http://www.qq.com"}]}),f=e=>{g.value.current=e.detail.value,l().setDebugDomain(g.value.current)},_=e=>{r.value=e.detail.value};return(e,t)=>{const v=o,b=c(u("uni-list-item"),A),w=c(u("uni-list"),B),C=c(u("uni-collapse-item"),z),I=$,E=x,j=c(u("uni-collapse"),D),H=y;return i(),k(O,null,[n(b,{title:"deBug",to:"./chat",onClick:e.onClick},{footer:s((()=>[n(v,{onChange:_})])),_:1},8,["to","onClick"]),n(H,{class:""},{default:s((()=>[r.value?(i(),a(j,{key:0,class:"!rounded-15px",accordion:"",modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),change:"handleChange"},{default:s((()=>[n(C,{title:"系统信息"},{default:s((()=>[n(w,{class:"bg-red-200"},{default:s((()=>[(i(!0),k(O,null,S(h.value,((e,t)=>(i(),a(b,{class:"!odd:bg-red-100 !even:bg-yellow-100",title:t,note:e,clickable:""},null,8,["title","note"])))),256))])),_:1})])),_:1}),n(C,{title:"基本信息"},{default:s((()=>[n(w,null,{default:s((()=>[(i(!0),k(O,null,S(V(p),((e,t)=>(i(),a(b,{class:"!odd:bg-red-100 !even:bg-yellow-100",title:t,note:e,clickable:""},null,8,["title","note"])))),256))])),_:1})])),_:1}),n(C,{title:"环境切换"},{default:s((()=>[n(E,{onChange:f},{default:s((()=>[n(w,{class:"p-15px"},{default:s((()=>[(i(!0),k(O,null,S(g.value.list,((e,t)=>(i(),a(I,{class:"!odd:bg-red-100 !even:bg-yellow-100 w-full pl-15px",value:e.domain,key:t,checked:e.domain==V(l)().debug_domain},{default:s((()=>[n(b,{class:"!bg-inherit",title:e.label,note:e.domain,clickable:""},null,8,["title","note"])])),_:2},1032,["value","checked"])))),128))])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])):m("",!0)])),_:1})],64)}}}),N=e({__name:"debugging",setup:e=>(e,t)=>{const l=c(u("uni-list"),B);return i(),a(I,null,{navbar:s((()=>[n(E,{title:"在线调试",backgroundColor:"#03a976",fixed:""})])),default:s((()=>[n(l,null,{default:s((()=>[n(H),n(U)])),_:1})])),_:1})}});export{N as default};
