import{d as a,r as e,o as r,c as s,w as o,a as l,b as d,x as t,ae as n,g as u,i as p,e as i,f as c}from"./index.cf819d24.js";import{_,a as m,b as f}from"./uni-forms.c1e1db30.js";import{_ as b}from"./page.vue_vue_type_script_setup_true_lang.e73b259d.js";import{_ as w}from"./nav_bar.vue_vue_type_script_setup_true_lang.c285c6a0.js";import{a as g}from"./index.821f9091.js";import"./uni-icons.ba5e75da.js";import"./uni-nav-bar.6de95021.js";const v=a({__name:"password",setup(a){const v=e(null),x=e({data:{old_password:"abc123456",new_password:"123456abc",confirm_password:"123456abc"},rules:{old_password:{rules:[{required:!0,errorMessage:"请输入原始密码"},{required:!0}]},new_password:{rules:[{required:!0,errorMessage:"请输入新密码"},{pattern:/^(?![0-9]+$)(?![a-zA-Z]+$).*$/,errorMessage:"新密码必须同时包含字母和数字"},{pattern:/^(?![0-9]+$)(?![a-zA-Z]+$).*$/,errorMessage:"新密码必须同时包含字母和数字"},{minLength:8,errorMessage:"新密码必须大于8个字符"},{validateFunction:(a,e,r,s)=>(e==r.old_password&&s("新旧密码不能完全相同"),!0)}]},confirm_password:{rules:[{required:!0,errorMessage:"请输入确认密码"},{required:!0},{validateFunction:(a,e,r,s)=>(e!==r.new_password&&s("确认密码和新密码不一致"),!0)}]}}}),y=()=>{v.value.validate().then((a=>{g.changePassword(a).then((a=>{0==a.data.code?(t({icon:"error",title:"修改成功"}),n()):t({icon:"none",title:a.data.data[0],duration:1e3})}))}))};return(a,e)=>{const t=u,n=p,g=i(c("uni-easyinput"),_),h=i(c("uni-forms-item"),m),V=i(c("uni-forms"),f);return r(),s(b,null,{navbar:o((()=>[l(w,{title:"修改密码",backgroundColor:"#03a976",fixed:""})])),bottom:o((()=>[l(n,{class:"bg-white pb-15px"},{default:o((()=>[l(t,{class:"w-4/5 mx-auto block py-10px rounded-full !bg-confirm text-red-300 text-16px !hover:text-gray-100","hover-class":"none",onClick:y},{default:o((()=>[d("确认修改")])),_:1})])),_:1})])),default:o((()=>[l(V,{class:"flex-auto px-5 pt-5",ref_key:"forms",ref:v,rules:x.value.rules,modelValue:x.value.data,"label-width":"90px","label-align":"right"},{default:o((()=>[l(h,{class:"",label:"原密码：",name:"old_password"},{default:o((()=>[l(n,{class:"border-b-1px"},{default:o((()=>[l(g,{class:"!bg-transparent",inputBorder:!1,primaryColor:"#03a976",modelValue:x.value.data.old_password,"onUpdate:modelValue":e[0]||(e[0]=a=>x.value.data.old_password=a),styles:"{'background-color': 'tranparent'}",type:"password",placeholder:"请输入密码"},null,8,["modelValue"])])),_:1})])),_:1}),l(h,{class:"",label:"新密码：",name:"new_password"},{default:o((()=>[l(n,{class:"border-b-1px"},{default:o((()=>[l(g,{inputBorder:!1,type:"password",primaryColor:"#03a976",modelValue:x.value.data.new_password,"onUpdate:modelValue":e[1]||(e[1]=a=>x.value.data.new_password=a),styles:"{'background-color': 'tranparent'}",placeholder:"请输入密码"},null,8,["modelValue"])])),_:1})])),_:1}),l(h,{class:"",label:"确认密码：",name:"confirm_password"},{default:o((()=>[l(n,{class:"border-b-1px"},{default:o((()=>[l(g,{inputBorder:!1,type:"password",primaryColor:"#03a976",modelValue:x.value.data.confirm_password,"onUpdate:modelValue":e[2]||(e[2]=a=>x.value.data.confirm_password=a),styles:"{'background-color': 'tranparent'}",placeholder:"请输入密码"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["rules","modelValue"])])),_:1})}}});export{v as default};
